CREATE SCHEMA `invoice` ;
CREATE TABLE `invoice`.`admin` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `role` ENUM('a', 'sa') NULL,
  `login_id` INT NULL,
  `created_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `deleted_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));
ALTER TABLE `invoice`.`admin` 
CHANGE COLUMN `deleted_at` `deleted_at` TIMESTAMP NULL ;
ALTER TABLE `invoice`.`admin` 
ADD COLUMN `last_login_at` TIMESTAMP NULL AFTER `deleted_at`,
CHANGE COLUMN `login_id` `email` VARCHAR(200) NULL DEFAULT NULL ;
ALTER TABLE `invoice`.`admin` 
ADD COLUMN `password`;VARCHAR(100) NULL AFTER `name`;
ALTER TABLE `invoice`.`admin` 
ADD COLUMN `identity` VARCHAR(100) NULL AFTER `password`;
CREATE TABLE `invoice`.`client` (
  `id` INT UNSIGNED NOT NULL,
  `name` VARCHAR(45) NULL,
  `company` VARCHAR(50) NULL,
  `addr1` VARCHAR(200) NULL,
  `addr2` VARCHAR(200) NULL,
  `city` VARCHAR(50) NULL,
  `zip` VARCHAR(45) NULL,
  `country` VARCHAR(25) NULL,
  `email` VARCHAR(50) NULL,
  `web_addr` VARCHAR(200) NULL,
  `phone_contact` VARCHAR(45) NULL,
  `mobile_contact` VARCHAR(45) NULL,
  `fax` VARCHAR(45) NULL,
  `created_by` INT NULL,
  `created_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `deleted_at` TIMESTAMP NULL,
  PRIMARY KEY (`id`));
  ALTER TABLE `invoice`.`client` 
ADD COLUMN `state` VARCHAR(45) NULL AFTER `city`;
ALTER TABLE `invoice`.`client` 
CHANGE COLUMN `id` `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT ;
ALTER TABLE `invoice`.`client` 
ADD COLUMN `updated_at` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP AFTER `deleted_at`;

CREATE TABLE `invoice`.`invoice` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `client_id` INT NULL,
  `invoice_no` VARCHAR(50) NULL,
  `currency` VARCHAR(50) NULL,
  `issue_date` VARCHAR(50) NULL,
  `invoice_due` INT NULL,
  `invoice_due_in` VARCHAR(50) NULL,
  `item_desciption` VARCHAR(500) NULL,
  `quantity` VARCHAR(50) NULL,
  `amount` VARCHAR(500) NULL,
  `discount_rate` VARCHAR(50) NULL,
  `created_by` INT NULL,
  `created_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `deleted_at` TIMESTAMP NULL,
  PRIMARY KEY (`id`));
  ALTER TABLE `invoice`.`invoice` 
ADD COLUMN `access_hash` VARCHAR(100) NULL AFTER `discount_rate`;
ALTER TABLE `invoice`.`invoice` 
ADD COLUMN `to` VARCHAR(50) NULL AFTER `discount_rate`,
ADD COLUMN `from` VARCHAR(50) NULL AFTER `to`,
ADD COLUMN `sub_total` DECIMAL NULL AFTER `from`,
ADD COLUMN `discount_amount` DECIMAL NULL AFTER `sub_total`,
ADD COLUMN `total` DECIMAL NULL AFTER `discount_amount`;
ALTER TABLE `invoice`.`invoice` 
DROP COLUMN `from`,
DROP COLUMN `to`,
CHANGE COLUMN `sub_total` `sub_total` VARCHAR(100) NULL DEFAULT NULL ,
CHANGE COLUMN `discount_amount` `discount_amount` VARCHAR(100) NULL DEFAULT NULL ,
CHANGE COLUMN `total` `total` VARCHAR(100) NULL DEFAULT NULL ;
ALTER TABLE `invoice`.`invoice` 
ADD COLUMN `is_view` TINYINT NULL DEFAULT 0 AFTER `total`;
CREATE TABLE `invoice`.`settings` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `admin_id` VARCHAR(45) NULL,
  `company` VARCHAR(100) NULL,
  `paypal_email` VARCHAR(50) NULL,
  `mobile` VARCHAR(45) NULL,
  `invoice_pattern` VARCHAR(45) NULL,
  `invoice_logo` VARCHAR(45) NULL,
  `street1` VARCHAR(100) NULL,
  `street2` VARCHAR(100) NULL,
  `city` VARCHAR(50) NULL,
  `state` VARCHAR(50) NULL,
  `zip_code` INT NULL,
  `country` VARCHAR(45) NULL,
  `created_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));
  ALTER TABLE `invoice`.`invoice` 
ADD COLUMN `footer` VARCHAR(250) NULL AFTER `total`;
ALTER TABLE `invoice`.`settings` 
ADD COLUMN `footer_email` VARCHAR(50) NULL AFTER `invoice_pattern`;
CREATE TABLE `invoice`.`payment` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `invoice_id` INT NULL,
  `client_id` INT NULL,
  `payment_status` VARCHAR(45) NULL,
  `payment_amount` VARCHAR(45) NULL,
  `payment_currency` VARCHAR(45) NULL,
  `txn_id` VARCHAR(45) NULL,
  `created_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));
ALTER TABLE `invoice`.`invoice` 
CHANGE COLUMN `item_desciption` `item_desciption` TEXT NULL DEFAULT NULL ,
CHANGE COLUMN `footer` `footer` TEXT NULL DEFAULT NULL ;
ALTER TABLE `invoice`.`invoice` 
CHANGE COLUMN `is_view` `status` TINYINT(4) NULL DEFAULT 0 ;
CREATE TABLE `invoice`.`smtp_settings` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `admin_id` INT NULL,
  `smtpHost` VARCHAR(200) NULL,
  `smtpUsername` VARCHAR(200) NULL,
  `smtpPass` VARCHAR(50) NULL,
  `smtpPort` INT NULL,
  `bcc` VARCHAR(50) NULL,
  `replyTo` VARCHAR(50) NULL,
  `setFromEmail` VARCHAR(50) NULL,
  `setFromName` VARCHAR(50) NULL,
  `SMTPSecure` VARCHAR(20) NULL,
  `auth` TINYINT NULL,
  `created_at` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));
ALTER TABLE `invoice` ADD `discount_name` VARCHAR(50) NOT NULL AFTER `sub_total`;

ALTER TABLE `invoice`.`invoice` 
ADD COLUMN `unpaid_at` TIMESTAMP NULL DEFAULT NULL AFTER `access_hash`;









